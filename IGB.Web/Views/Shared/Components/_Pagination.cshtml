@model IGB.Web.ViewModels.Components.PaginationViewModel
@using Microsoft.AspNetCore.Routing

@{
    var totalPages = Math.Max(1, Model.TotalPages);
    var page = Math.Max(1, Math.Min(Model.Page, totalPages));

    object RouteWithPage(int p)
    {
        // merge RouteValues with page/pageSize
        var dict = new RouteValueDictionary(Model.RouteValues ?? new { });
        dict["page"] = p;
        dict["pageSize"] = Model.PageSize;
        return dict;
    }
}

<div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2">
    <div class="text-muted small">
        Showing <strong>@Model.From</strong> to <strong>@Model.To</strong> of <strong>@Model.TotalCount</strong> entries
    </div>

    <nav aria-label="Pagination">
        <ul class="pagination pagination-sm mb-0">
            <li class="page-item @(page <= 1 ? "disabled" : "")">
                <a class="page-link" href="@Url.Action(Model.Action, Model.Controller, RouteWithPage(page - 1))" aria-label="Previous">
                    <span aria-hidden="true">«</span>
                </a>
            </li>

            @for (var p = Math.Max(1, page - 2); p <= Math.Min(totalPages, page + 2); p++)
            {
                <li class="page-item @(p == page ? "active" : "")">
                    <a class="page-link" href="@Url.Action(Model.Action, Model.Controller, RouteWithPage(p))">@p</a>
                </li>
            }

            <li class="page-item @(page >= totalPages ? "disabled" : "")">
                <a class="page-link" href="@Url.Action(Model.Action, Model.Controller, RouteWithPage(page + 1))" aria-label="Next">
                    <span aria-hidden="true">»</span>
                </a>
            </li>
        </ul>
    </nav>
</div>


