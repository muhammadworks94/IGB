@model IGB.Web.ViewModels.Components.SelectFieldViewModel

@{
    var id = $"fld_{Model.Name}".Replace(".", "_");
    var describedById = !string.IsNullOrWhiteSpace(Model.HelpText) ? $"{id}_help" : null;
    var invalid = !string.IsNullOrWhiteSpace(Model.ErrorMessage);
}

<div class="mb-3 @(Model.CssClass ?? "")">
    <label for="@id" class="form-label">@Model.Label @if (Model.Required) { <span class="text-danger">*</span> }</label>
    <select id="@id"
            name="@Model.Name"
            class="form-select @(invalid ? "is-invalid" : "")"
            aria-invalid="@(invalid ? "true" : "false")"
            aria-describedby="@describedById"
            @(Model.Required ? "required" : null)
            @(Model.Disabled ? "disabled" : null)>
        @if (!string.IsNullOrWhiteSpace(Model.Placeholder))
        {
            <option value="">@Model.Placeholder</option>
        }
        @foreach (var opt in Model.Options)
        {
            <option value="@opt.Value" selected="@(opt.Value == Model.Value)" disabled="@(opt.Disabled)">
                @opt.Label
            </option>
        }
    </select>
    @if (!string.IsNullOrWhiteSpace(Model.HelpText))
    {
        <div id="@describedById" class="form-text">@Model.HelpText</div>
    }
    @if (invalid)
    {
        <div class="invalid-feedback">@Model.ErrorMessage</div>
    }
</div>


